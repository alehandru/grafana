# Grafana

Test environment for Intel Snap and Telegraf agents using Grafana and ElasticSearch

# [Getting Started]

The test enviroment depends on having a docker enviroment running. If you need to install docker on OSX you can learn from here https://docs.docker.com/docker-for-mac/install/

# Building test enviroment

To build test enviroment run the following command:

docker-compose build

# Running the test enviroment

To run the test enviroment run the following command:

docker-compose up

This command starts the following docker containers:
* Telegraf Container:
    * Runs Telegraf Agent

* Snap container:
    * Runs Intel Snap Agent

* Grafana container:
    * Runs the following services:
        * ElasticSearch
        * Grafana
        * Kibana
        * Ngix
        * Carbon
        * Graphite

# Data flow

Collector agent sends metrics to ElasticSearch at http://grafana:9200. The data stored inside ElasticSearch is displayed using Grafana which connects ElasticSearch at http://localhost:9200. 

# See data using Grafana dashboards

Open a browser and navigate to Grafana website http://localhost:3000. Login as user 'admin' with password 'admin'.
Navigate to Data Sources, open each data source Sanp/Telegraf and click Save and Test.
Navigate to Dashboards, open Snap/Telegraf dashboards to see metrics generated by each agent. 

NOTE: Please note that not all metrics generated by agents are displayed in dashboards.

# Other usefull information

Log files are generated under grafana/supervisor directory.

# Grafana: 
  Url:  http://localhost:3000
  Install directory: /www/data/grafana
  Configuration: grafana/config.js
  Setup script: grafana/add_data_sources.py
    - adds data sources
    - adds dashboards
  Dashboard templates:
     - Snap - grafana/snap-metrics.json
     - Telegraf - grafana/telegraf-metrics.json

# Elastic Search:
  Install directory: /opt/elasticsearch

# Graphite:
  Install directory: /opt/graphite
  Configuration: graphite/carbon.conf

# Kibana
  Install directory: /www/data/kibana
  Configuration: kibana/carbon.conf

# Ngix:
  Configuration: nginx/nginx.conf

# Intel Snap:
  Install directory: /opt/snap
  Configuration: snap/config.yaml

# Telegraf:
  Install directory: /opt/telegraf
  Configuration: telegraf/telegraf.conf


